@using HRSystem.Models
@model List<Department>

<div class="card-header">
    <div class="card-title-wrap bar-success">
        <h4 class="card-title">Department Information</h4>
    </div>
</div>
<section id="horizontal-form-layouts">

    <div class="row">
        <div class="col-sm-12">
            <div class="card-body collapse show">
                <div class="table-responsive">
                    <table class="table table-hover table-bordered ">
                        <thead class="text-light bg-dark">
                            <tr class="text-center">

                                <th>Name</th>
                                <th>Action</th>
                                


                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in @Model)
                            {
                                <tr>
                                    <!-- Modal -->
                                <div class="modal fade" id="exampleModal-@item.Id" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" id="modalDialog">
                                            <div class="modal-content" id="modalContent">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLabel">Warning</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">    
                                                </div>
                                                @if (@item.employees == null)
                                                {
                                                    <h5 class="ml-3 mb-4 mr-1">Are you sure you need to delete this data ? </h5>

                                                    <div class="modal-footer">
                                                        <a asp-action="Delete" asp-controller="Department" asp-route-id="@item.Id" class="btn btn-danger pr-2 pl-2">Delete </a>
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                                    </div>
                                                }
                                                else
                                                {
                                                    <h5 class="ml-2 mb-4 mr-1">you can't delete department contains employees</h5>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                                    </div>
                                                }


                                            </div>
                                        </div>
                                    </div>
                                    <!-- Modal -->

                            </tr>


                                <tr class="text-center">

                                    <td>@item.Name</td>

                                    <td>
                                        <a asp-action="Edit" asp-controller="Department" asp-route-id="@item.Id" class="btn btn-success pr-2 pl-2">Edit </a>


                                    
                                        <button type="button" class="btn btn-danger " data-toggle="modal" data-target="#exampleModal-@item.Id">Delete</button>
                                    </td>

                                </tr>

                            }



                        </tbody>
                    </table>
                    <a asp-action="New" asp-controller="Department" class="btn btn-success">+Add New Department </a>

                </div>
            </div>
        </div>
    </div>

</section>